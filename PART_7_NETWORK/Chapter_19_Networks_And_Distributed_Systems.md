## What we gonna study

분산 시스템은 메모리 또는 클락을 공유하지 않는 프로세서의 집합이다. 대신에, 각 노드는 그것의 고유 로컬 메모리를 가진다. 노드는 가속 버스같은 다양한 네트워크를 통해서 다른 것과 소통한다. 분산된 시스템들은 더욱 관련이 있고, 너는 몇가지 분산된 서비스를 사용한다. 분산 시스템의 앱은 조직내에서 파일에 투명한 접근을 제공하는 것부터 대규모 클라우드 파일과 사진 저장소 서비스, 큰 데이터셋에서 사업 트렌드의 분석, 과학적 데이터의 평행적 프로세싱등이 있다. 실제로, 가장 일반적인 분산 시스템의 예시는 인터넷이다.

이 장에서, 우리는 일반적인 분산 시스템의 구조와 그들을 연결하는 네트워크를 알아보겠다. 우리는 또한 현재 분산 시스템 디자인의 타입과 역할에서의 차이를 대조하겠다. 마지막으로, 우리는 분산 파일 시스템에서의 기본 디자인과 어려운점을 보겠다.

## Objectives

- 네트워크, 분산 시스템의 장점을 설명한다.
- 분산 시스템을 연결하는 네트워크의 높은 레벨 개요를 제공하겠다.
- 오늘날 사용되는 분산시스템의 종류와 역할을 정의하겠다.
- 분산 파일 시스템의 디자인에 관련된 이슈를 논의하겠다.

## 19.1 분산 시스템의 장점

**distributed system**은 통신 네트워크에 의해서 연결된 loosely coupled nodes의 집합이다. 분산 시스템의 특정 노드의 관점에서, 나머지 노드와 그들의 각각의 리소스들은 원격이고, 반면에 그것의 리소스는 로컬이다. 분산 시스템의 노드는 사이즈와 함수에서 다양하다. 그들은 작은 마이크로 프로세서, pc, 큰 범용 컴퓨터 시스템을 포함할 수 있다. 이런 프로세서들은 그들이 언급하는 문맥에 따라 *processors, sites, hosts, machine*과 같이 다양한 이름으로 언급된다. 우리는 주로 머신의 위치를 말하기 위해서 *site*를 사용하고 사이트에서의 특정 시스템을 언급하기 위해서 *node*를 사용한다. 노드들은 *client-server*, *peer-to-peer*와 같은 상태로 존재할 수 있다. 일반적인 클라이언트-서버에서, one node at on site, the *server*는 다른 노드인 *client*가 사용하기를 원하는 리소스를 가지고 있다. peer-to-peer에서, 서버나 클라언트가 없다. 대신에, 노드들은 클라이언트와 서버로서 동등한 책임을 공유한다.

몇가지 사이트들은 통신 네트워크에 의해서 연결되어 있을때, 다양한 sites에 있는 유저들은 정보를 교환할 기회를 가진다. 낮은 레벨에서, **messages**들은 시스템 사이에서 전달되고, 3.4절에서 얘기한 단일 컴퓨터 메시지 시스템에서 프로세스간에 메시지가 교환되는 것과 비슷하다. 메시지 패싱이 주어지면, 단일 시스템에서 발견되는 모든 높은 레벨 기능은 분산 시스템을 포함하게 확장된다. 이런 함수는 파일 저장소, 앱의 실행, RPCs를 포함한다.

분산 시스템을 짓는 주요한 3가지 이유가 있다 : 리소스 공유, 연산 가속, 신뢰성. 이 절에서, 우리는 간단하게 이를 살펴보겠다.

### 19.1.1 리소스 공유

만약 많은 수의 다른 사이트들이 다른 것에 연결되면, 한 site에 있는 유저는 다른 곳에 가용한 리소스를 사용할 수 있다. 예를 들어서, site A의 유저는 site B에 있는 데이터베이스에 문의한다. 그 동안에, site B의 유저는 site A에 존재하는 파일에 접근한다. 일반적으로, 분산 시스템에서 **resource sharing** 원격 site에서 파일 공유, 분산 데이터 베이스에서의 데이터 처리, 원격 site의 파일 인쇄, 슈퍼 컴퓨터나 GPU같은 특화 하드웨어를 원격에서 사용하기 위한 메커니즘을 제공한다.

### 19.1.2 Computation SpeedUp

만약 특정 연산이 동시에 작동하는 서브 컴퓨테이션으로 분할될 수 있으면, 분산 시스템은 다양한 site사이에서 subcomputation을 분산하게 허용한다. subcomputation은 동시에 작동이 가능하고 그러므로 **computation speedup**을 제공한다. 이것은 근 데이터 셋의 처리를 진행할때 사용된다. 추가로, 만약 특정 site가 현재 요청이 과적되면, 그들의 일부가 덜 적재된 site로 이동하거나 재설정된다. 이런 행동을 **load balancing**이라고 부르고 분산 시스템 노드와 인터넷에서 제공되는 다른 서비스에서는 일반적이다.

### 19.1.3 Reliability

만약 분산 시스템에서 한개의 사이트가 실패하면, 나머지 사이트는 계속 작동하고, 시스템은 나은 신뢰성을 얻는다. 만약 시스템이 다중 대형 자율적인 설치로 구성되면, 그들중 하나의 실패는 나머지에게 영향을 주지 않는다. 만약 시스템이 몇몇 중요한 시스템 함수를 책임지는 다각화된 머신으로 구성되면, 한개의 실패는 전체 시스템을 멈추게한다. 일반적으로, 충분한 낭비와 함께라면, 시스템은 그것의 노드가 몇개 실패해도 작동을 지속한다.

노드 또는 site의 실패는 시스템에 의해서 발견되고 적절한 행동은 실패로부터 회복되는데 필요하다. 시스템은 반드시 그 사이트의 서비스를 사용하지 말아야한다. 추가로, 만약 실패한 사이트의 함수가 다른 사이트로 넘어가면, 시스템은 반드시 함수의 전달이 알맞게 일어났는지 확인해야한다. 마지막으로, 실패한 사이트가 회복되거나 수리되면, 그것을 시스템으로 부드럽게 다시 합병하는 메커니즘이 있어야한다.

## 19.2 Network Structure

오늘 날 사용하는 분산 시스템의 종류와 역할을 완벽히 이해하기 위해서, 우리는 그들을 연결하는 네트워크를 이해할 필요가 있다. 이 절은 기본적인 네트워킹 컨셉과 그들이 분산 시스템과 관련된 문제를 소개하는 네트워크 입문서로서 다루겠다. 장의 나머지는 분산 시스템을 특별히 다루겠다.

네트워크에는 두가지 타입이 있다 : **Local-area networks(LAB)**과 **Wide-area networks(WAN)**이다. 두개의 가장 큰 차이점은 그들이 지리적으로 분산된 방식이다. LAN은 작은 공간(단일 건물 또는 인접한 빌딩)에 분산된 호스트들로 구성되어있고, 반면에 WAN은 큰 공간(미국)에 부산된 시스템으로 구성되어 있다. 이런 차이가 통신 네트워크의 속도와 신뢰성에서의 주요한 변형을 내포하고, 그들은 분산 시스템 디자인에도 반영된다.

### 19.2.1 LAN

LAN은 메인프레임 컴퓨터 시스템의 대체로 1970년대 초기에 부상했다. 많은 기업체가, 각자의 앱을 가진 작은 컴퓨터들을 가지는 것 단일 큰 시스템을 가지는 것보다 경제적이었다. 각 작은 컴퓨터가 부속 디바이스의 전체 보완을 필요로했고, 몇가지 데이터 공유가 단일 기업체에서 공유되어야했다. 그것은 이런 작은 시스템을 네트워크로 연결하는 자연스러운 단계이다.

LANs 말했듯이, 작은 지리적 영역에 디자인되고 그들은 오프시 또는 가정 환경에서 쓰였다. 이런 시스템에서의 모든 사이트는 다른 것과 가까웠고, 그래서 통신 링크는 빠른 속도와 wan에 비해서 적은 에러를 가졌다.

일반적인 LAN은 다른 컴퓨터(워크스테이션, 서버, 랩탑, 태블릿, 스마트폰)를 포함하고, 다양한 공유 부속 디바이스(프린터, 저장소행렬), 하나 또는 이상의 **router**를 포함한다. 이더넷과 **WiFi**는 LAN을 건설하느데 사용되었다. *Wireless access points*가 LAN에 디바이스를 무선으로 연결하고 그들은 그들자체로 라우터가 되거나 안되었다.

이더넷 네트워크들은 일반적으로 컴퓨터와 부속기기가 이동이 불가능한 사업과 조직에서 사용되었다. 이런 네트워크들은 *coaxial, twisted pair, fiber optic*케이블을 시그널을 보내기 위해서 사용한다. 이더넷 네트워크는 중앙 컨트롤러가 없는데, 왜냐하면 그것은 다중 엑세스 버스이고 그래서 새로운 호스트들은 네트워크에 쉽게 추가될 수 있다. 이더넷 프로토콜은 IEEE 802.3 표준에 의해서 정의된다. twisted-pair 케이블링을 사용하는 일반적인 이더넷 속도는 10Mbps~10Gbps이고 다른 케이블링은 100Gbps이다.

와이파이는 이제 유비쿼터스이고 전통적인 이더넷 네트워크를 보충하거나 그 자체로 존재한다. 특히, 와이파이는 우리가 네트워크를 물리적 케이블 없이 건설하게 허용한다. 각 호스트는 네트워크에 참석하는데 사용하는 무선 전송기와 수신기를 가진다. 와이파이는 IEEE 802.11 표준으로 정의된다. 무선 네트워크는 가정과 사업에서 유망하다. 와이파이 속도는 11Mbps에서 400Mbps로 다양하다.

IEEE 802.3과 802.11 표준은 지속적으로 진화중이다. 다양한 표준과 속도에 관한 최근의 정보에서는 장의 마지막에 살펴보겠다.

### 19.2.2 WAN

WAN은 1960년 후반에 부상했고, 사이트 사이에서 하드웨어와 소프트웨어가 넓은 범위의 유저에 의해서 간편하고 경제적으로 공유되는 것을 허용하는 효율적인 소통을 제공하기 위한 학술적인 연구 프로젝트로서 발전했다. 첫번째로 디자인되고 개발된 WAN은 ARPANET이다. 1968년에 시작해서, ARPANET은 4가지 사이트 실험적인 네트워크에서 WWW인 수백만개의 컴퓨터 시스템을 구성하는 **Internet**으로 자랐다.

WAN의 사이트는 물리적으로 넓은 장소에 분산되어있다. 일반적인 링크들은 전화선, leased llines, optical cable, microwave link, radio waves, satellite channel이다. 이런 통신 링크들은 다른 라우터와 네트워크의 교통을 지시하고 다양한 사이트 사이에서 정보를 전송하는 라우터에 의해서 제어된다.

예를 들어서, 인터넷 WAN은 멀리 떨어진 호스트가 다른 것과 통신하게 한다. 호스트 컴퓨터들은 일반적으로 통신하는 것과 속도, CPU 종류, 운영체제 등이 다르다. 호스트들은 LAN위에 있고, 지역 네트워크를 통해 인터넷에 연결되어있다. 지역 네트워크들은 라우터와 함께 worldwide network에 연결되어 있다. 거주자들은 전화, 케이블 또는 거주자를 중앙 서비스와 연결하는 라우터가 설치된 특화된 인터넷 서비스 제공자와 연결되어있다. 물론, 인터넷 사이에는 WAN이 있다. 회사는 그것의 사적인 WAN을 증가된 보안, 성능, 신뢰성을 위해서 만들 수 있다.

WANs들은 일반적으로 LANs보다 느린데, 비록 주요한 도시를 연결하는 근간 WAN 연결은 광학 케이블을 통해서 빠른 속도의 전송속도를 가질 수 있다. 실제로, 많은 근간 제공자들은 40Gbps 또는 100Gbps의 광학 케이블을 가진다.(그것은 보통 로컬 **Internet Service Providers(ISPs)**로부터의 링크이다.) 그러나, WAN 링크들은 빠른 속도를 원하는 수요가 늘어나면서 빠른 기술로 발전하고 있다.

자주, WANs와 LANs는 연결되어있고, 그것은 어떤게 시작이고 어떤게 끝인지 말하기 어렵다. 핸드폰 데이터 네트워크를 고려하겠다. 핸드폰들은 음성과 데이터 통신에 사용된다. 주어진 영역에 있는 핸드폰은 수신기와 송신기를 가진 무선기지국에서 나오는 라디오파를 통해서 연결한다. 네트워크의 부분은 셀폰이 다른 것과 통신하지 않는다는 것을 제외하면 LAN과 비슷하다. (비록 두 사람이 데이터를 주고받거나 통화해도 같은 타워에 연결되어있다고 한다.) 오히려, 기지국이 다른 기지국과 타워 통신을 랜드 라인 또는 다른 통신 매체에 연결하고 그들의 목적지로 라우트하는 허브에 연결되어있다. 이 네트워크의 부분은 WAN과 비슷하다. 한번 적절한 타워가 패킷을 받으면, 그것은 송신기를 이용해서 정확한 수신인이 있는 곳으로 보낸다.